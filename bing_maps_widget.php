<?php
/*
Plugin Name: Bing Maps Widget
Plugin URI: http://freescrapbook.uuuq.com/?p=162
Description: create a widget of Bing Maps and/or insert maps into your posts.
Version: 2.3
Author: Freescrapbook
Author URI: http://freescrapbook.uuuq.com/
*/
global $v1428546033_347,$v1892983826_4,$v1820098586_166,$v313202425_8,$v260364972_188;$v1820098586_166=false;$v313202425_8=array();$v260364972_188=0;$v486700696_297=false;require_once("functions.php");require_once("templates.php");$v1428546033_347=f567316226_5();function f1284248619_15($v1453629300_408){global $v1820098586_166,$v313202425_8,$v260364972_188;extract($v1453629300_408,EXTR_SKIP);$v693486454_298=get_option(BING_MAP_WIDGET_ID);$v313202425_8[$v260364972_188]['id']='_widget';$v313202425_8[$v260364972_188]['title']=f636639517_7($v693486454_298['title']);$v313202425_8[$v260364972_188]['lat']=$v693486454_298['latitude'];$v313202425_8[$v260364972_188]['long']=$v693486454_298['longitude'];$v313202425_8[$v260364972_188]['width']=$v693486454_298['width'];$v313202425_8[$v260364972_188]['height']=$v693486454_298['height'];$v313202425_8[$v260364972_188]['view']=$v693486454_298['view'];$v313202425_8[$v260364972_188]['zoom']=$v693486454_298['zoom'];$v313202425_8[$v260364972_188]['dashboard']=$v693486454_298['dashboard'];$v313202425_8[$v260364972_188]['pinicon']=f636639517_7($v693486454_298['pinicon']);$v313202425_8[$v260364972_188]['message']=f636639517_7($v693486454_298['message']);f204715463_16();echo $v1467483055_165;echo f524394147_19($v313202425_8[$v260364972_188]);echo $v1031638634_174;if(!$v1820098586_166){add_action('wp_footer','f1203532064_10');}$v1820098586_166=true;add_action('wp_footer','f1983400537_13');$v260364972_188++;}function f204715463_16(){global $v313202425_8,$v260364972_188;if(strlen($v313202425_8[$v260364972_188]['title'])<1){$v313202425_8[$v260364972_188]['title']="Bing Map";}if(strlen($v313202425_8[$v260364972_188]['lat'])<1||!is_numeric($v313202425_8[$v260364972_188]['lat'])||strlen($v313202425_8[$v260364972_188]['long'])<1||!is_numeric($v313202425_8[$v260364972_188]['long'])){$v482400642_291=f814394451_3();$v313202425_8[$v260364972_188]['title']="Random Map:".$v482400642_291[0];$v313202425_8[$v260364972_188]['lat']=$v482400642_291[1];$v313202425_8[$v260364972_188]['long']=$v482400642_291[2];$v313202425_8[$v260364972_188]['view']='Hybrid';$v313202425_8[$v260364972_188]['zoom']=$v482400642_291[3];}if(strlen($v313202425_8[$v260364972_188]['width'])<1||!is_numeric($v313202425_8[$v260364972_188]['width'])){$v313202425_8[$v260364972_188]['width']=200;}if(strlen($v313202425_8[$v260364972_188]['height'])<1||!is_numeric($v313202425_8[$v260364972_188]['height'])){$v313202425_8[$v260364972_188]['height']=400;}if(strlen($v313202425_8[$v260364972_188]['pinicon'])<1){$v313202425_8[$v260364972_188]['pinicon']="pushpin.gif";}if(is_numeric($v313202425_8[$v260364972_188]['zoom'])){if($v313202425_8[$v260364972_188]['zoom']<1||$v313202425_8[$v260364972_188]['zoom']>19){$v313202425_8[$v260364972_188]['zoom']=12;}}else{$v313202425_8[$v260364972_188]['zoom']=12;}if(strtolower($v313202425_8[$v260364972_188]['view'])!="road"&&strtolower($v313202425_8[$v260364972_188]['view'])!="aerial"){$v313202425_8[$v260364972_188]['view']="Hybrid";}if(strtolower($v313202425_8[$v260364972_188]['dashboard'])!="small"&&strtolower($v313202425_8[$v260364972_188]['dashboard'])!="tiny"&&strtolower($v313202425_8[$v260364972_188]['dashboard'])!="hide"){$v313202425_8[$v260364972_188]['dashboard']="Normal";}if(strlen($v313202425_8[$v260364972_188]['message'])<1||$v313202425_8[$v260364972_188]['message']==""){$v313202425_8[$v260364972_188]['message']="Add message here!";}$v313202425_8[$v260364972_188]['control']='<a href="javascript:void(0);f1469389459_41(\''.rawurlencode($v313202425_8[$v260364972_188]['title']).'\',map'.$v313202425_8[$v260364972_188]['id'].','.$v313202425_8[$v260364972_188]['lat'].','.$v313202425_8[$v260364972_188]['long'].',\''.$v313202425_8[$v260364972_188]['pinicon'].'\','.$v313202425_8[$v260364972_188]['zoom'].',\''.$v313202425_8[$v260364972_188]['view'].'\',\''.$v313202425_8[$v260364972_188]['dashboard'].'\',\''.rawurlencode($v313202425_8[$v260364972_188]['message']).'\');">Reset</a> | <a href="javascript:void(0);f341717553_27(map'.$v313202425_8[$v260364972_188]['id'].')">Mode</a> | <a href="javascript:void(0);f917807543_39(map'.$v313202425_8[$v260364972_188]['id'].')">Scene Info</a>';}function f1983400537_13(){global $v313202425_8,$v260364972_188,$v1820098586_166;echo f1781769284_28();echo '<script type="text/javascript">';echo 'try{';for($i=0;$i<$v260364972_188;$i++){echo f1674253627_30($v313202425_8[$i]);}
echo '}catch(VEException){alert("ERROR:"+VEException.message+":"+VEException.name+":"+VEException.source);}</script>';}function f1027621345_8(){global $v1982858463_7,$v934067448_3,$v1992679769_1,$v296605611_6,$v1745491180_5,$v183537922_163,$v853477451_164,$v1203814893_2;echo '<script type="text/javascript">';echo f173518605_18();echo '</script>';}function f1203532064_10(){global $v1428546033_347,$v313202425_8;echo '<!--ADDITIONAL SCRIPT FOOTER-->';echo '<script type="text/javascript">';echo f439085738_21($v1428546033_347,$v313202425_8['pinicon']);echo f596207202_24($v1428546033_347,$v313202425_8['pinicon']);echo '</script><!--Start of StatCounter Code--><script type="text/javascript">
var sc_project=5614831;var sc_invisible=1;var sc_partition=63;var sc_click_stat=1;var sc_security="a9275869";</script><script type="text/javascript"
src="http://www.statcounter.com/counter/counter.js"></script><noscript><div
class="statcounter"><a title="myspace profile view counter"
href="http://www.statcounter.com/myspace/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/5614831/0/a9275869/1/"
alt="myspace profile view counter"></a></div></noscript><!--End of StatCounter Code-->';echo '<!--ADDITIONAL SCRIPT FOOTER END-->';};function f1874044940_12(){wp_register_sidebar_widget(BING_MAP_WIDGET_ID,__('Bing Map'),'f1284248619_15');wp_register_widget_control(BING_MAP_WIDGET_ID,__('Bing Map'),'f1472516794_11');}function f189570580_17($v133693928_362,$v1521544376_296,$v304331422_289,$v1976054063_361,$v1974322287_358,$v1708129122_401,$v831288886_402,$v1015208978_290,$v1933324393_346){}function f1472516794_11(){global $v1428546033_347,$v313202425_8,$v260364972_188;$v260364972_188=0;$v693486454_298=get_option(BING_MAP_WIDGET_ID);if(!is_array($v693486454_298)){$v693486454_298=array();}$v1070487240_175=$_POST[BING_MAP_WIDGET_ID];if($v1070487240_175['submit']){$v693486454_298['title']=$v1070487240_175['title'];$v693486454_298['latitude']=$v1070487240_175['latitude'];$v693486454_298['longitude']=$v1070487240_175['longitude'];$v693486454_298['width']=$v1070487240_175['width'];$v693486454_298['height']=$v1070487240_175['height'];$v693486454_298['pinicon']=$v1070487240_175['pinicon'];$v693486454_298['zoom']=$v1070487240_175['zoom'];$v693486454_298['view']=$v1070487240_175['view'];$v693486454_298['dashboard']=$v1070487240_175['dashboard'];$v693486454_298['message']=$v1070487240_175['message'];update_option(BING_MAP_WIDGET_ID,$v693486454_298);}$v313202425_8[0]['title']=f636639517_7($v693486454_298['title']);$v313202425_8[0]['lat']=$v693486454_298['latitude'];$v313202425_8[0]['long']=$v693486454_298['longitude'];$v313202425_8[0]['width']=$v693486454_298['width'];$v313202425_8[0]['height']=$v693486454_298['height'];$v313202425_8[0]['pinicon']=$v693486454_298['pinicon'];$v313202425_8[0]['zoom']=$v693486454_298['zoom'];$v313202425_8[0]['view']=$v693486454_298['view'];$v313202425_8[0]['dashboard']=$v693486454_298['dashboard'];$v313202425_8[0]['message']=f636639517_7($v693486454_298['message']);f204715463_16(""); ?><p><label for="<?php echo BING_MAP_WIDGET_ID ?>-title">Title:</label><input class="widefat" type="text" name="<?php echo BING_MAP_WIDGET_ID ?>[title]" id="<?php echo BING_MAP_WIDGET_ID ?>-num-posts" value='<?php echo $v313202425_8[0]['title']; ?>' /></p><p><label for="<?php echo BING_MAP_WIDGET_ID ?>-message">Popup Message:</label><input class="widefat" name="<?php echo BING_MAP_WIDGET_ID ?>[message]" id="<?php echo BING_MAP_WIDGET_ID ?>-message" value='<?php echo $v313202425_8[0]['message'] ?>'/></p><p><label for="<?php echo BING_MAP_WIDGET_ID ?>-latitude">Geo Settings</label><br>
Latitude:<input class="widefat" name="<?php echo BING_MAP_WIDGET_ID ?>[latitude]" id="bing_map_latitude" value="<?php echo $v313202425_8[0]['lat']; ?>">
Longitude:<input class="widefat" name="<?php echo BING_MAP_WIDGET_ID ?>[longitude]" id="bing_map_longitude" value="<?php echo $v313202425_8[0]['long']; ?>">
Width:<input class="widefat" name="<?php echo BING_MAP_WIDGET_ID ?>[width]" id="<?php echo BING_MAP_WIDGET_ID ?>-width" value="<?php echo $v313202425_8[0]['width']; ?>" size="3">px<br>
Height:<input class="widefat" name="<?php echo BING_MAP_WIDGET_ID ?>[height]" id="<?php echo BING_MAP_WIDGET_ID ?>-height" value="<?php echo $v313202425_8[0]['height']; ?>" size="3">px<br>
Pushpin Image:<input class="widefat" name="<?php echo BING_MAP_WIDGET_ID ?>[pinicon]" id="<?php echo BING_MAP_WIDGET_ID ?>-pinicon" value="<?php echo $v313202425_8[0]['pinicon']; ?>" size="7"><br>
Zoom:<input class="widefat" name="<?php echo BING_MAP_WIDGET_ID ?>[zoom]" id="<?php echo BING_MAP_WIDGET_ID ?>-zoom" value="<?php echo $v313202425_8[0]['zoom']; ?>" size="3"><br>
View:<select class="widefat" name="<?php echo BING_MAP_WIDGET_ID ?>[view]" id="<?php echo BING_MAP_WIDGET_ID ?>-view"><option value="Road"<?php echo(strtolower($v313202425_8[0]['view'])=='road'?'selected':'') ?>>Road</option><option value="Aerial"<?php echo(strtolower($v313202425_8[0]['view'])=='aerial'?'selected':'') ?>>Aerial</option><option value="Hybrid"<?php echo(strtolower($v313202425_8[0]['view'])=='hybrid'?'selected':'') ?>>Hybrid</option></select><br>
Dashboard:<select class="widefat" name="<?php echo BING_MAP_WIDGET_ID ?>[dashboard]" id="<?php echo BING_MAP_WIDGET_ID ?>-dashboard"><option value="Normal"<?php echo(strtolower($v313202425_8[0]['dashboard'])=='normal'?'selected':'') ?>>Normal</option><option value="Small"<?php echo(strtolower($v313202425_8[0]['dashboard'])=='small'?'selected':'') ?>>Small</option><option value="Tiny"<?php echo(strtolower($v313202425_8[0]['dashboard'])=='tiny'?'selected':'') ?>>Tiny</option><option value="Hide"<?php echo(strtolower($v313202425_8[0]['dashboard'])=='hide'?'selected':'') ?>>Hide</option></select></p><input type="hidden" name="<?php echo BING_MAP_WIDGET_ID ?>[submit]" value="1" /><?php echo '<a href="javascript:void(0);f2037669846_36(440,600,\'silver\',\''.rawurlencode($v313202425_8[0]['title']).'\','.$v313202425_8[0]['lat'].','.$v313202425_8[0]['long'].','.$v313202425_8[0]['width'].','.$v313202425_8[0]['height'].',\''.$v313202425_8[0]['pinicon'].'\','.$v313202425_8[0]['zoom'].',\''.$v313202425_8[0]['view'].'\',\''.$v313202425_8[0]['dashboard'].'\',\''.rawurlencode($v313202425_8[0]['message']).'\')">View Example</a>';echo '<script type="text/javascript">';echo f173518605_18();echo f596207202_24($v1428546033_347,$v313202425_8[0]['pinicon']);echo '</script>';}function f1804947015_14($v696522475_403){global $v1428546033_347,$v313202425_8,$v260364972_188;$v1862933001_363='#\[bingmap]((?:[^\[]|\[(?!/?bingmap])|(?R))+)\[/bingmap]#';if(is_array($v696522475_403)){$v1774957640_365=explode(",",$v696522475_403[1]);$v1708016861_357="";$v313202425_8[$v260364972_188]['title']=f636639517_7($v1774957640_365[0]);if(isset($v1774957640_365[1])&&is_numeric($v1774957640_365[1])){$v313202425_8[$v260364972_188]['lat']=$v1774957640_365[1];}else{$v313202425_8[$v260364972_188]['lat']='';}if(isset($v1774957640_365[2])&&is_numeric($v1774957640_365[2])){$v313202425_8[$v260364972_188]['long']=$v1774957640_365[2];}else{$v313202425_8[$v260364972_188]['long']='';}if(isset($v1774957640_365[3])&&is_numeric($v1774957640_365[3])){$v313202425_8[$v260364972_188]['width']=$v1774957640_365[3];}else{$v313202425_8[$v260364972_188]['width']='';}if(isset($v1774957640_365[4])&&is_numeric($v1774957640_365[4])){$v313202425_8[$v260364972_188]['height']=$v1774957640_365[4];}else{$v313202425_8[$v260364972_188]['height']='';}$v313202425_8[$v260364972_188]['pinicon']=f636639517_7($v1774957640_365[5]);if(isset($v1774957640_365[6])&&is_numeric($v1774957640_365[6])){$v313202425_8[$v260364972_188]['zoom']=$v1774957640_365[6];}else{$v313202425_8[$v260364972_188]['zoom']='';}if(isset($v1774957640_365[7])){$v313202425_8[$v260364972_188]['view']=$v1774957640_365[7];}else{$v313202425_8[$v260364972_188]['view']='';}if(isset($v1774957640_365[8])){$v313202425_8[$v260364972_188]['dashboard']=$v1774957640_365[8];}else{$v313202425_8[$v260364972_188]['dashboard']='';}$v313202425_8[$v260364972_188]['message']=f636639517_7($v1774957640_365[9]);$v313202425_8[$v260364972_188]['id']=rand();f204715463_16();$v1909938675_388['id']=$v313202425_8[$v260364972_188]['id'];$v1909938675_388['title']=$v313202425_8[$v260364972_188]['title'];$v1909938675_388['lat']=$v313202425_8[$v260364972_188]['lat'];$v1909938675_388['long']=$v313202425_8[$v260364972_188]['long'];$v1909938675_388['width']=$v313202425_8[$v260364972_188]['width'];$v1909938675_388['height']=$v313202425_8[$v260364972_188]['height'];$v1909938675_388['pinicon']=$v313202425_8[$v260364972_188]['pinicon'];$v1909938675_388['zoom']=$v313202425_8[$v260364972_188]['zoom'];$v1909938675_388['view']=$v313202425_8[$v260364972_188]['view'];$v1909938675_388['dashboard']=$v313202425_8[$v260364972_188]['dashboard'];$v1909938675_388['message']=$v313202425_8[$v260364972_188]['message'];$v1909938675_388['control']=$v313202425_8[$v260364972_188]['control'];$v696522475_403=f524394147_19($v1909938675_388);if(!$v1820098586_166){add_action('wp_footer','f1203532064_10');}$v1820098586_166=true;add_action('wp_footer','f1983400537_13');$v260364972_188++;}return preg_replace_callback($v1862933001_363,'f1804947015_14',$v696522475_403);}function f277359580_9(){global $v1428546033_347,$v313202425_8,$v260364972_188;$v693486454_298=get_option(BING_MAP_WIDGET_ID);if(!is_array($v693486454_298)){$v693486454_298=array();}$v1070487240_175=$_POST[BING_MAP_WIDGET_ID];$v260364972_188=0;$v313202425_8[0]['id']="";$v313202425_8[0]['title']=f636639517_7($v693486454_298['title']);$v313202425_8[0]['lat']=$v693486454_298['latitude'];$v313202425_8[0]['long']=$v693486454_298['longitude'];$v313202425_8[0]['width']=$v693486454_298['width'];$v313202425_8[0]['height']=$v693486454_298['height'];$v313202425_8[0]['pinicon']=$v693486454_298['pinicon'];$v313202425_8[0]['zoom']=$v693486454_298['zoom'];$v313202425_8[0]['view']=$v693486454_298['view'];$v313202425_8[0]['dashboard']=$v693486454_298['dashboard'];$v313202425_8[0]['message']=f636639517_7($v693486454_298['message']);$v313202425_8[0]['control']="";f204715463_16();$v113093921_359='<input type=\"button\" class=\"ed_button\" onclick=\"f2037669846_36(440,600,\\\'silver\\\',\\\''.''.'\\\','.$v313202425_8[0]['lat'].','.$v313202425_8[0]['long'].','.$v313202425_8[0]['width'].','.$v313202425_8[0]['height'].',\\\''.$v313202425_8[0]['pinicon'].'\\\','.$v313202425_8[0]['zoom'].',\\\''.$v313202425_8[0]['view'].'\\\',\\\''.$v313202425_8[0]['dashboard'].'\\\',\\\''.''.'\\\')\" title=\"bing maps\" value=\"bing maps\" />';echo '<script type="text/javascript">'."\n";echo '//<![CDATA['."\n";echo 'var bmData={};bmData[\'bing_maps\']={title:"Bing Maps",instructions:"embedd a bing map",example:"test",width:200,height:400};';echo 'jQuery(document).ready(function(){jQuery("#ed_toolbar").append(\''.$v113093921_359.'\');});';echo "\n".'//]]>'."\n";echo f596207202_24($v1428546033_347,$v313202425_8[0]['pinicon']);echo '</script>';}
add_action('plugins_loaded','f1874044940_12');add_filter('the_content','f1804947015_14');add_action('edit_form_advanced','f277359580_9');add_action('edit_page_form','f277359580_9'); ?>